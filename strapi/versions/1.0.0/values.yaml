# Global settings (required by cpln-helm)
global:
  cpln:
    gvc: ""  # REQUIRED: Your GVC name (just the name, not a full link)
             # Example: "production" or "staging"

strapi:
  # REQUIRED: Your custom Strapi Docker image
  # Build with: cpln image build --push --name my-strapi --tag v1 --org my-org
  # See README.md for instructions on building your image
  #
  # Control Plane Registry format (recommended):
  #   /org/ORG_NAME/image/IMAGE_NAME:TAG
  #   Example: /org/my-org/image/my-strapi:v1
  #   Example: /org/my-org/image/my-strapi:abc1234
  #
  # External registry format:
  #   Example: ghcr.io/your-org/your-strapi:latest
  #   Example: docker.io/username/strapi:v1
  image: /org/my-org/image/my-strapi:v1

  # Optional: Image pull secret for external container registries
  # Leave empty ("") when using Control Plane registry
  #
  # VALUE FORMAT: Just the secret NAME, not a full link
  #   Correct: "github-registry"
  #   Wrong:   "//secret/github-registry"
  #   Wrong:   "/org/my-org/secret/github-registry"
  #
  # The template automatically constructs the full reference:
  #   //secret/{{ .Values.strapi.imagePullSecret }}
  #
  # To create a pull secret:
  #   cpln secret create SECRET_NAME --org ORG --type docker \
  #     --docker-server REGISTRY_URL \
  #     --docker-username USERNAME \
  #     --docker-password TOKEN
  #
  # Examples:
  #   imagePullSecret: ""                  # No secret (Control Plane registry)
  #   imagePullSecret: "github-registry"   # For ghcr.io
  #   imagePullSecret: "dockerhub-creds"   # For docker.io
  #   imagePullSecret: "gitlab-registry"   # For registry.gitlab.com
  imagePullSecret: ""

  # REQUIRED: Database connection settings
  # Connect to your existing PostgreSQL database
  database:
    # Database hostname
    # For Control Plane postgres template: RELEASE-postgres.GVC.cpln.local
    # For external databases: your-db.example.com
    # Examples:
    #   host: "my-db-postgres.production.cpln.local"
    #   host: "strapi-db.us-east-1.rds.amazonaws.com"
    host: ""           # REQUIRED

    port: "5432"
    name: "strapi"
    username: ""       # REQUIRED: Database username
    password: ""       # REQUIRED: Database password
    ssl: "false"       # Set to "true" if your database requires SSL

  # Container resources
  resources:
    cpu: 500m
    memory: 512Mi

  # Autoscaling configuration
  autoscaling:
    minScale: 1
    maxScale: 3

  # REQUIRED: Strapi application secrets
  # Generate unique values using: openssl rand -base64 32
  secrets:
    appKeys: ""              # REQUIRED: Comma-separated list (minimum 2 keys)
    apiTokenSalt: ""         # REQUIRED: API token salt
    adminJwtSecret: ""       # REQUIRED: Admin panel JWT secret
    transferTokenSalt: ""    # REQUIRED: Transfer token salt
    jwtSecret: ""            # REQUIRED: JWT secret for users-permissions plugin

# =============================================================================
# Control Plane Object Reference Formats (for reference)
# =============================================================================
#
# Images (Control Plane registry):
#   /org/ORG_NAME/image/IMAGE_NAME:TAG
#
# Secrets (referenced in templates):
#   //secret/SECRET_NAME                    - Org-level secret
#   //secret/SECRET_NAME.KEY                - Specific key in dictionary secret
#   cpln://secret/SECRET_NAME.KEY           - For environment variable values
#
# Identities:
#   //identity/IDENTITY_NAME                - Org-level identity
#   //gvc/GVC_NAME/identity/IDENTITY_NAME   - GVC-scoped identity
#
# Workloads:
#   WORKLOAD_NAME.GVC_NAME.cpln.local       - Internal DNS for workload
#
# Policies:
#   //policy/POLICY_NAME
#
# Example full references used in this template:
#   Image:    /org/my-org/image/my-strapi:v1
#   Secret:   cpln://secret/my-release-strapi-secrets.appKeys
#   Identity: //gvc/production/identity/my-release-strapi-identity
# =============================================================================
